NineNineFreelas.utils.TooltipUtils=function(){function a(){function a(a,b){var d="object"==typeof a.data("qtip");if(!d){var e=(new Date).getTime(),f="tooltip-ranking-geral-cliente-"+b+"-"+e;a.qtip({overwrite:!1,content:{text:'<div id="'+f+'" class="tooltip-container loading"><img src="'+n+'/images/ajax-loader.gif" alt="Carregando" /></div>'},hide:{fixed:!0,delay:100},position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"}},style:{width:300,border:{width:0,radius:3,color:"#6a6a6a"},padding:10,tip:!0,name:"light"},api:{onRender:function(){c(b,function(a){var b='<div class="tooltip-content">';1==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Projetos publicados: </span> <span class="nota-value">'+a.projetosPublicados+'</span></div><div class="nota-container"><span class="nota-label">Projetos cancelados: </span> <span class="nota-value">'+a.projetosCancelados+"</span></div>"),b+='<div class="nota-container"><span class="nota-label">Projetos em andamento: </span> <span class="nota-value">'+a.projetosEmAndamento+'</span></div><div class="nota-container"><span class="nota-label">Projetos concluídos: </span> <span class="nota-value">'+a.projetosConcluidos+'</span></div><div class="nota-container"><span class="nota-label">Recomendações: </span> <span class="nota-value">'+a.recomendacoes+'</span></div><div class="nota-container"><span class="nota-label">Avaliações: </span> <span class="nota-value">'+a.avaliacoes+'</span></div><div class="nota-container"><span class="nota-label">Média geral: </span> <span class="nota-star" data-score="'+a.mediaNota+'"></span></div><p class="separador"></p>',1==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Clareza na especificação: </span> <span class="nota-star" data-score="'+a.mediaNotaClarezaEspecificacao+'"></span></div>'),b+='<div class="nota-container"><span class="nota-label">Comunicação: </span> <span class="nota-star" data-score="'+a.mediaNotaComunicacao+'"></span></div>',b+='<div class="nota-container"><span class="nota-label">Profissionalismo: </span> <span class="nota-star" data-score="'+a.mediaNotaProfissionalismo+'"></span></div>',b+='<div class="nota-container"><span class="nota-label">Trabalharia novamente: </span> <span class="nota-star" data-score="'+a.mediaNotaTrabalhariaNovamente+'"></span></div>',2==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Especialização: </span> <span class="nota-star" data-score="'+a.mediaNotaEspecializacao+'"></span></div>'),2==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Qualidade do trabalho: </span> <span class="nota-star" data-score="'+a.mediaNotaQualidadeTrabalho+'"></span></div>'),b+="</div></div>",$(document.getElementById(f)).empty().append(b).removeClass("loading"),$(".nota-star").raty({score:function(){return $(this).attr("data-score")},path:o,readOnly:!0,noRatedMsg:"Não há avaliações",hints:["Muito ruim","Ruim","Regular","Bom","Excelente"]})})}}})}}function c(a,b,c){var d={idProjeto:a};c=m.defineDefault({uniqueParam:!1,validate:!1,queryParam:!0,handleErrors:!1,callbackOnSuccessOnly:!0,backgroundProcess:!0,urlAction:p.getMediaRankingGeralDoCliente,methodName:"getMediaRankingGeralDoCliente"},c),m.genericGet(d,function(a){return b?b(a.result):void 0},c)}function d(a,b){var c="object"==typeof a.data("qtip");if(!c){var d=(new Date).getTime(),f="tooltip-ranking-geral-"+b+"-"+d;a.qtip({overwrite:!1,content:{text:'<div id="'+f+'" class="tooltip-container loading"><img src="'+n+'/images/ajax-loader.gif" alt="Carregando" /></div>'},hide:{fixed:!0,delay:100},position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"}},style:{width:300,border:{width:0,radius:3,color:"#6a6a6a"},padding:10,tip:!0,name:"light"},api:{onRender:function(){e(b,function(a){var b='<div class="tooltip-content">';2==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Ranking: </span> <span class="nota-value">'+a.ranking+"</span></div>"),1==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Projetos publicados: </span> <span class="nota-value">'+a.projetosPublicados+'</span></div><div class="nota-container"><span class="nota-label">Projetos cancelados: </span> <span class="nota-value">'+a.projetosCancelados+"</span></div>"),b+='<div class="nota-container"><span class="nota-label">Projetos em andamento: </span> <span class="nota-value">'+a.projetosEmAndamento+'</span></div><div class="nota-container"><span class="nota-label">Projetos concluídos: </span> <span class="nota-value">'+a.projetosConcluidos+'</span></div><div class="nota-container"><span class="nota-label">Recomendações: </span> <span class="nota-value">'+a.recomendacoes+'</span></div><div class="nota-container"><span class="nota-label">Avaliações: </span> <span class="nota-value">'+a.avaliacoes+'</span></div><div class="nota-container"><span class="nota-label">Média geral: </span> <span class="nota-star" data-score="'+a.mediaNota+'"></span></div><p class="separador"></p>',1==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Clareza na especificação: </span> <span class="nota-star" data-score="'+a.mediaNotaClarezaEspecificacao+'"></span></div>'),b+='<div class="nota-container"><span class="nota-label">Comunicação: </span> <span class="nota-star" data-score="'+a.mediaNotaComunicacao+'"></span></div>',b+='<div class="nota-container"><span class="nota-label">Profissionalismo: </span> <span class="nota-star" data-score="'+a.mediaNotaProfissionalismo+'"></span></div>',b+='<div class="nota-container"><span class="nota-label">Trabalharia novamente: </span> <span class="nota-star" data-score="'+a.mediaNotaTrabalhariaNovamente+'"></span></div>',2==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Especialização: </span> <span class="nota-star" data-score="'+a.mediaNotaEspecializacao+'"></span></div>'),2==a.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Qualidade do trabalho: </span> <span class="nota-star" data-score="'+a.mediaNotaQualidadeTrabalho+'"></span></div>'),b+="</div></div>",$(document.getElementById(f)).empty().append(b).removeClass("loading"),$(".nota-star").raty({score:function(){return $(this).attr("data-score")},path:o,readOnly:!0,noRatedMsg:"Não há avaliações",hints:["Muito ruim","Ruim","Regular","Bom","Excelente"]})})}}})}}function e(a,b,c){var d={idPessoa:a};c=m.defineDefault({uniqueParam:!1,validate:!1,queryParam:!0,handleErrors:!1,callbackOnSuccessOnly:!0,backgroundProcess:!0,urlAction:p.getMediaRankingPessoa,methodName:"getMediaRankingPessoa"},c),m.genericGet(d,function(a){return b?b(a.result):void 0},c)}function f(a,b,c){var d="object"==typeof a.data("qtip");if(!d){var e=(new Date).getTime(),f="tooltip-ranking-feedback-"+b+"-"+c+"-"+e;a.qtip({overwrite:!1,content:{text:'<div id="'+f+'" class="tooltip-container loading"><img src="'+n+'/images/ajax-loader.gif" alt="Carregando" /></div>'},hide:{fixed:!0,delay:100},position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"}},style:{width:300,border:{width:0,radius:3,color:"#6a6a6a"},padding:10,tip:!0,name:"light"},api:{onRender:function(){g(b,c,function(a){var b='<div class="tooltip-content"><div class="nota-container"><span class="nota-label">Recomenda: </span> <span class="nota-value">'+(a.recomenda?"Sim":"Não")+'</span></div><div class="nota-container"><span class="nota-label">Média geral: </span> <span class="nota-star" data-score="'+a.notaGeral+'"></span></div><p class="separador"></p>';1==a.pessoaQueRecebeu.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Clareza na especificação: </span> <span class="nota-star" data-score="'+a.notaClarezaEspecificacao+'"></span></div>'),b+='<div class="nota-container"><span class="nota-label">Comunicação: </span> <span class="nota-star" data-score="'+a.notaComunicacao+'"></span></div>',b+='<div class="nota-container"><span class="nota-label">Profissionalismo: </span> <span class="nota-star" data-score="'+a.notaProfissionalismo+'"></span></div>',b+='<div class="nota-container"><span class="nota-label">Trabalharia novamente: </span> <span class="nota-star" data-score="'+a.notaTrabalhariaNovamente+'"></span></div>',2==a.pessoaQueRecebeu.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Especialização: </span> <span class="nota-star" data-score="'+a.notaEspecializacao+'"></span></div>'),2==a.pessoaQueRecebeu.tipoUsuario.id&&(b+='<div class="nota-container"><span class="nota-label">Qualidade do trabalho: </span> <span class="nota-star" data-score="'+a.notaQualidadeTrabalho+'"></span></div>'),b+="</div></div>",$(document.getElementById(f)).empty().append(b).removeClass("loading"),$(".nota-star").raty({score:function(){return $(this).attr("data-score")},path:o,readOnly:!0,noRatedMsg:"Não há avaliações",hints:["Muito ruim","Ruim","Regular","Bom","Excelente"]})})}}})}}function g(a,b,c,d){var e={idPessoa:a,idProjeto:b};d=m.defineDefault({uniqueParam:!1,validate:!1,queryParam:!0,handleErrors:!1,callbackOnSuccessOnly:!0,backgroundProcess:!0,urlAction:p.getMediaRankingFeedbackProjeto,methodName:"getMediaRankingFeedbackProjeto"},d),m.genericGet(e,function(a){return c?c(a.result):void 0},d)}function h(){$(".feedback-star, .avaliacoes-star").raty({score:function(){return $(this).attr("data-score")},path:o,readOnly:!0,noRatedMsg:"Não há avaliações para esse usuário",hints:["","","","",""]});var b;$(".avaliacoes-star").each(function(c,e){b=$(e),"undefined"!=typeof b.attr("data-pessoa")?d(b,b.attr("data-pessoa")):a(b,b.attr("data-projeto"))});var c;$(".feedback-star").each(function(a,b){c=$(b),f(c,c.attr("data-pessoa-recebeu"),c.attr("data-projeto"))})}function i(a,b,c){var d,e,f;switch(c){case l.N:d="topMiddle",e="bottomMiddle";break;case l.NE:d="topRight",e="bottomLeft",f="bottomLeft";break;case l.L:d="rightMiddle",e="leftMiddle",f="leftMiddle";break;case l.SE:d="bottomRight",e="topLeft";break;case l.S:d="bottomMiddle",e="topMiddle";break;case l.SO:d="bottomLeft",e="topRight";break;case l.O:d="leftMiddle",e="rightMiddle";break;case l.NO:d="topLeft",e="bottomRight"}a="#"==a.charAt(0)?a:document.getElementById(a),$(a).qtip({content:b,position:{corner:{target:d,tooltip:e}},style:{name:"blue",fontSize:"12px",tip:{corner:f,size:{x:8,y:8}}},show:"mouseover",hide:"mouseout"})}function j(a,b,c,d){var e=$(a);e.find(".avaliacoes-star").attr("data-pessoa",b).attr("data-score",c),e.find(".avaliacoes-text").html("("+d+" "+(1===parseInt(d)?"avaliação":"avaliações")+")")}function k(){b.TooltipPosition=l,b.aplicarTooltip=i,b.inicializarStars=h,b.prepararAvaliacoesPessoa=j}var l={N:"N",NE:"NE",L:"L",SE:"SE",S:"S",SO:"SO",O:"O",NO:"NO"},m=NineNineFreelas.prepare(NineNineFreelas.utils.ServiceUtils),n=NineNineFreelas.constants.Urls.RESOURCES_BASE_PATH,o=n+"/images/raty",p={getMediaRankingGeralDoCliente:NineNineFreelas.services.Projeto.getMediaRankingGeralDoCliente,getMediaRankingPessoa:NineNineFreelas.services.Usuario.getMediaRankingPessoa,getMediaRankingFeedbackProjeto:NineNineFreelas.services.Projeto.getMediaRankingFeedbackProjeto};k()}var b={};return b.prepare=function(){return b.prepare=function(){return b},a(),b},b}();
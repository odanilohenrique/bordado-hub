NineNineFreelas.utils.ServiceUtils=function(){function a(){function a(a){return a=jQuery.parseJSON(a)}function c(b){try{return b=decodeURIComponent(b),b=a(b)}catch(c){return console.error(c),null}}function d(a){var b=JSON.stringify(a),c=encodeURIComponent(b);return c}function e(a,b){var c=new Date(a);return c.setDate(c.getDate()+b),c}function f(a,b){a||(a={}),b||(b={});for(var c in b)b.hasOwnProperty(c)&&void 0===a[c]&&(a[c]=b[c]);return a}function g(a){return a=a.split(".").join(""),a=a.split(",").join(".")}function h(a,b,c){c=f(c,{methodType:"POST"}),k(a,b,c)}function i(a,b,c){c=f(c,{methodType:"GET"}),k(a,b,c)}function j(a){return new String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function k(a,b,e){function g(a,b){e.blockRepeated&&(Z[e.methodName]=a?!0:void 0),e.btn&&(e.secondaryProcess||(e.processMsg||(e.processMsg=e.btn.html()),e.endMsg||(e.endMsg=e.btn.html()),a?e.btn.addClass("btn-disabled").attr("disabled",!0).html(e.processMsg):b?setTimeout(function(){e.btn.removeClass("btn-disabled").attr("disabled",!1).html(e.endMsg)},1e3):e.btn.removeClass("btn-disabled").attr("disabled",!1).html(e.endMsg)))}function h(a){k(!0,a)}function i(a){k(!1,a)}function j(){g(!1,!1)}function k(d,f){try{tb.esconderMensagensDeFalha(e),d&&(f=c(f)),n(f,a,b,e)}finally{var h=m(f)&&e.urlSuccess&&!e.secondaryProcess;g(!1,h),e.runAfter&&e.runAfter(f)}}function l(){var b,c,g=e.urlAction,j="text",k=void 0,l=null;tb.esconderMensagensDeFalha(e),e.uniqueParam?a&&(b=d(a),e.queryParam?g+="?data="+b:l={data:b}):e.queryParam?(a=f({},a),c=jQuery.param(a),g+=c?"?"+c:""):(k="application/json",l=JSON.stringify(a)),$.ajax({type:e.methodType,contentType:k,dataType:j,url:g,data:l,success:h,error:i})}if(e=f(e,{blockRepeated:!1,uniqueParam:!0,validate:!1,executeBefore:null,handleErrors:!0,handleSuccess:!0,callbackOnSuccessOnly:!1,backgroundProcess:!1,secondaryProcess:!1,queryParam:!1,callbackAlways:!1,urlSuccess:null,urlSuccessNewWindow:!1,keyMsgSuccess:null,generalErrorMsgForFail:!1,msgSuccess:null,urlAction:"",methodName:"",btn:null,processMsg:null,endMsg:null,disableSendRemoteErrors:!1,hideDataOnError:!1,errorHandlers:null,runAfter:null}),!e.blockRepeated||!Z[e.methodName])try{if(g(!0),!e.urlAction)throw"URL não informada (options.urlAction).";if(e.validate){var o=a.validate(e);if(!o)return e.callbackAlways&&b&&b(),g(!1),void 0}e.executeBefore?e.executeBefore(function(){l()},function(a){i(a)},function(){j()}):l()}catch(p){i(p)}}function l(a){var b={status:{id:_},result:a};return b}function m(a){var b,c=!1;return a&&a.status&&(b=a.status.id,c=b===_||b===ab||b===bb),c}function n(a,b,c,d){function e(a){!c||d.callbackOnSuccessOnly&&!m(a)||c(a)}if(d=f(d,{handleSuccess:null,handleErrors:null}),d.handleSuccess&&o(a,d),d.errorHandlers){var g=d.errorHandlers;d.handleErrors&&!g.fnDefault&&(g.fnDefault=function(){p(a,b,d),e(a)}),q(g,a)}else d.handleErrors&&p(a,b,d);(m(a)||!d.errorHandlers)&&e(a)}function o(a,b){var c;if(m(a)&&(b=f(b,{urlSuccess:null,keyMsgSuccess:null,msgSuccess:null}),a&&a.status&&(c=a.status.id,c===_||c===ab)))if(a.message&&c===ab&&(b.keyMsgMetaCompletada=a.message),"function"==typeof b.urlSuccess&&(b.urlSuccess=String(b.urlSuccess(a)||"")),"function"==typeof b.keyMsgSuccess&&(b.keyMsgSuccess=String(b.keyMsgSuccess(a)||"")),"function"==typeof b.msgSuccess&&(b.msgSuccess=String(b.msgSuccess(a)||"")),b.urlSuccess&&!b.secondaryProcess){var d={};b.keyMsgSuccess&&(d.success=b.keyMsgSuccess),b.keyMsgMetaCompletada&&(d["meta-completada"]=b.keyMsgMetaCompletada),b.urlSuccess=wb.addParamToUrl(b.urlSuccess,$.param(d)),b.urlSuccessNewWindow?window.open(b.urlSuccess,"_blank"):window.location.href=b.urlSuccess}else b.msgSuccess&&tb.exibirMsgSucesso(b.msgSuccess)}function p(a,b,c){var d,e=!0;if(!m(a))if(b||(b={}),c=f(c,{urlOrigin:window.location.href,methodName:"",methodType:""}),(c.secondaryProcess||c.backgroundProcess)&&(e=!1),a&&a.status)switch(d=a.status.id){case cb:tb.exibirMensagemDeFalhaGeral(a.message,c);break;case db:c.validationResult=a.result.validationResult,ub.tratarValidationResult(c);break;case eb:xb.criarLogDeErro("ERRO_INTERNO",c.methodName,c.hideDataOnError?null:{data:a,objEnviado:b},c.urlOrigin),e&&tb.exibirMsgErroPadrao();break;case fb:window.location.reload();break;default:c.secondaryProcess||("404"===String(a.status)?tb.exibirMsgErro('Não foi possível conectar ao servidor. <a href="'+window.location.href+'">Clique aqui</a> para recarregar a página.'):"403"===String(a.status)?tb.exibirMsgErro("Acesso negado. Verifique se possui permissão para realizar essa ação e se está no perfil correto."):"413"===String(a.status)?tb.exibirMsgErro("Limite de dados excedido. Se estiver fazendo upload de algum arquivo, por favor, tente usar um arquivo menor."):"503"===String(a.status)?tb.exibirMsgErro("Não foi possível completar a ação. Por favor, tente novamente."):"504"===String(a.status)?tb.exibirMsgErro("Tempo limite de espera atingido (timeout). Por favor, tente recarregar a página e, se necessário, executar a ação novamente."):"513"===String(a.status)?tb.exibirMsgErro("Não foi possível completar a ação. Por favor, tente novamente."):e&&tb.exibirMsgErroPadrao())}else{if(!c.disableSendRemoteErrors){var g=(c.methodType?c.methodType+"_":"")+"FAIL",h={data:a,objEnviado:c.hideDataOnError?null:b};xb.criarLogDeErro(g,c.methodName,h,c.urlOrigin)}e&&tb.exibirMsgErroPadrao()}}function q(a,b){if(a=a||{},!m(b)){var c=b&&b.status&&b.status.id,d=null;if(c===cb){var e=b&&b.failInfo&&b.failInfo.key,f={SUSPECT_PATTERN_REQUIRE_CONFIRMATION:a.fnRequerConfirmacaoPadraoSuspeito,SUSPECT_PATTERN_REQUIRE_CONFIRMATION_BLOCKED:a.fnRequerConfirmacaoPadraoSuspeitoBloqueado};d=e&&f[e]}d?d(b):a.fnDefault&&a.fnDefault(b)}}function r(a){var b=kb+"/profile";return a&&a.startsWith(b+"/")?x(a,!1):a}function s(){return x()}function t(){return sb+"/images/default-portfolio-img.png"}function u(){return sb+"/images/default-portfolio-video.png"}function v(a){return x(a,!1)}function w(a){return x(a,!0)}function x(a,b){if((a||"").startsWith("http://")||(a||"").startsWith("https://"))return a;var c=kb+"/profile",d="66x66",e="210x210",f=c+"/"+d,g=c+"/"+e,h="default.jpg",i=sb+"/images/"+h,j=f+"/"+h,k=g+"/"+h,l=a;return a&&""!==a.trim()?a.startsWith(c)||(l=b?c+"/"+d+"/"+a:c+"/"+e+"/"+a):l=i,(rb||l===j||l===k)&&(l=i),l}function y(a,b){var c=kb+"/portfolios",d="",e="";return B(a.extensao)?(d="imagens/",d+=b?"250x167":"original"):d="files",e=a.idPessoa+"/"+a.token+"/"+a.nomeUrl+"."+a.extensao,c+"/"+d+"/"+e}function z(a){var b=kb+"/messages",c=a.idPessoa+"/"+a.token+"/"+a.nomeUrl+"."+a.extensao;return b+"/"+c}function A(a){var b=kb+"/intermediation",c=a.idPessoa+"/"+a.token+"/"+a.nomeUrl+"."+a.extensao;return b+"/"+c}function B(a){return"jpeg"==a||"jpg"==a||"png"==a}function C(a){switch(a){case gb:return"CPF";case hb:return"CNPJ";default:return"Documento"}}function D(a){switch(a){case gb:return ib;case hb:return jb;default:return""}}function E(){return{color:"#333",height:"auto",width:"100%",size:"10px",railVisible:!0,disableFadeOut:!0,touchScrollStep:50}}function F(a){var b=a,c=C(a),d=b==lb,e=d?"Razão Social":"Nome";return{idTipoDocumento:b,nomeDocumento:c,nomePessoaInfo:e}}function G(a){return{status:{id:cb},message:a}}function H(a){if(!localStorage)return!0;var b=localStorage.getItem(a),c=(new Date).getTime();return!b||c-864e5>+b}function I(a,b){localStorage&&b&&localStorage.setItem(a,""+(new Date).getTime())}function J(a){var b=function(b){b&&(b={idPessoa:b.profileId},a(b))};return yb.on("session-changed",b,{socket:!0}),b}function K(a){var b=function(b){b&&(b={idPessoa:b.profileId,idConversa:b.talkId,idTipoConversa:b.talkTypeId,idMensagem:b.messageId,idRemetente:b.senderId,admin:b.admin},a(b))};return yb.on("new-message",b,{socket:!0}),b}function L(a,b){var c=function(a){a&&(a={idPessoa:a.profileId,idConversa:a.talkId,idMensagem:a.messageId,idRemetente:a.senderId,admin:a.admin},b(a))};return yb.on("talk-"+a,c,{socket:!0}),c}function M(a,b){yb.removeListener("talk-"+a,b,{socket:!0})}function N(a){var b=function(b){b&&(b={idPessoa:b.profileId,idConversa:b.talkId,visualizada:b.viewed},a(b))};return yb.on("talk-viewed",b,{socket:!0}),b}function O(a){var b=function(b){b&&(b={idPessoa:b.profileId,idNotificacao:b.notificationId},a(b))};return yb.on("new-notification",b,{socket:!0}),b}function P(a){var b=function(b){b&&(b={idPessoa:b.profileId,idNotificacao:b.notificationId,visualizada:b.viewed},a(b))};return yb.on("notification-viewed",b,{socket:!0}),b}function Q(a){var b=function(b){b&&(b={idProjeto:b.projectId,idSubcategoria:b.subcategoryId},a(b))};return yb.socket.join("all"),yb.on("new-project",b,{socket:!0}),b}function R(a){var b=function(b){b&&(b={idPessoa:b.profileId,idProjeto:b.projectId},a(b))};return yb.on("project-viewed",b,{socket:!0}),b}function S(a,b){T(a,"state",b)}function T(a,b,c,d){var e="data-"+b,f=a.attr(e);ub.isValidString(d)||(d=""),ub.isValidString(f)||(f=""),f=d+f,ub.isValidString(f)&&a.removeClass(f),ub.isValidString(c)?a.attr(e,c).addClass(d+c):a.attr(e,"")}function U(a){function b(a,b){var c;e!==a&&(b&&(g.val(""),g.trigger("change"),h.val(""),h.trigger("change")),c=F(a),i&&i.text(c.nomeDocumento),j&&j.text(c.nomePessoaInfo),vb.aplicarMascaraTipoDocumento(g,c.idTipoDocumento),e=a)}function c(a){var c,d=f.find("input[type=radio]:checked");d.length>0?(c=parseInt(d.attr("data-id")),b(c,a)):b(0,a)}function d(){return e}var e=a.idTipoPessoa,f=a.$radioGroupTipoPessoa,g=a.$documentoPrincipal,h=a.$nomePessoaDocumento,i=a.$documentoPrincipalLabel,j=a.$nomePessoaDocumentoLabel;return{getIdTipoPessoa:d,definirDocumentoPeloTipoPessoa:b,definirDocumentoPrincipal:c}}function V(a,b){$.each(a.data(),function(a,c){var d="data-"+vb.camelCaseToHyphen(a);b.attr(d,c)})}function W(a,b,c){var d=function(d,e){var f=function(a,b){console.error("captcha - ",b);var c=G(a);e(c)};if(a&&mb&&nb){var g=turnstile.getResponse();c(g),d&&d()}else if(a&&pb&&mb)grecaptcha.ready(function(){try{grecaptcha.execute(qb,{action:b}).then(function(a){c(a),d&&d()})}catch(a){f("Erro na validação do Captcha. Se o erro persistir, entre em contato conosco através do email suporte@99freelas.com.br",a)}});else if(a&&ob&&mb)try{var g=grecaptcha.getResponse();g&&g.length?(c(g),d&&d()):f('Erro na validação do Captcha (por favor, marque a caixa com o texto "Não sou um robô").')}catch(h){f("Erro na validação do Captcha. Por favor, tente novamente. Se o erro persistir, entre em contato conosco através do email suporte@99freelas.com.br",h)}else d&&d()};return d}function X(a,b){var c=!1,d=!1,e=function(e){c?d=!0:(c=!0,d=!1,a(),setTimeout(function(){c=!1,d&&e(e)},b||500))};return e(function(a){e(a)})}function Y(){b.parseJSON=a,b.getDataObjectFromJSONEncoded=c,b.generateJsonUrlParam=d,b.escapeHtml=j,b.defineDefault=f,b.formatarValorParaDecimal=g,b.genericPost=h,b.genericGet=i,b.tratarResultado=n,b.tratarSucesso=o,b.tratarErros=p,b.tratarErrosEspecificos=q,b.normalizeFileUrl=r,b.getDefaultProfileUrl=s,b.getDefaultPortfolioImgThumbUrl=t,b.getDefaultPortfolioVideoThumbUrl=u,b.getProfileUrlNormal=v,b.getProfileUrlSmall=w,b.getPortfolioURL=y,b.getArquivoConversaURL=z,b.getArquivoPagamentoIntermediadoURL=A,b.isImage=B,b.getNomeTipoDocumento=C,b.getMascaraTipoDocumento=D,b.createSuccessResult=l,b.isSuccessStatus=m,b.addDays=e,b.scrollDefaultOptions=E,b.gerarFalhaComMensagem=G,b.isRequestConfirmation=H,b.afterRequestConfirmation=I,b.onSessionChange=J,b.onNewMessage=K,b.onTalkChange=L,b.removeTalkChangeList=M,b.onTalkViewed=N,b.onNewNotification=O,b.onNotificationViewed=P,b.onNewProject=Q,b.onProjectViewed=R,b.defineContainerState=S,b.defineContainerFlag=T,b.generateDocumentChangeHandler=U,b.copyData=V,b.gerarFnCaptcha=W,b.rateLimit=X}var Z={},_=NineNineFreelas.constants.ResultStatus.SUCESSO,ab=NineNineFreelas.constants.ResultStatus.META_COMPLETADA,bb=NineNineFreelas.constants.ResultStatus.RESULTADO_BOOLEANO,cb=NineNineFreelas.constants.ResultStatus.FALHA_COM_MENSAGEM,db=NineNineFreelas.constants.ResultStatus.FALHA,eb=NineNineFreelas.constants.ResultStatus.ERRO_INTERNO,fb=NineNineFreelas.constants.ResultStatus.USUARIO_DESLOGADO,gb=NineNineFreelas.constants.Codigos.TIPO_CPF,hb=NineNineFreelas.constants.Codigos.TIPO_CNPJ,ib=NineNineFreelas.constants.Mascaras.CPF,jb=NineNineFreelas.constants.Mascaras.CNPJ,kb=NineNineFreelas.constants.Urls.FILE_S3_BASE_URL,lb=NineNineFreelas.constants.Codigos.TIPO_CNPJ,mb=NineNineFreelas.constants.Config.CONFIG_USAR_CAPTCHA,nb=NineNineFreelas.constants.Config.USAR_CLOUDFLARE_CAPTCHA,ob=NineNineFreelas.constants.Codigos.USAR_RECAPTCHA_V2,pb=NineNineFreelas.constants.Codigos.USAR_RECAPTCHA_V3,qb=NineNineFreelas.constants.Codigos.RECAPTCHA_V3_SITE_KEY,rb=NineNineFreelas.constants.General.PROFILE_IMAGE_SHOW_DEFAULT,sb=NineNineFreelas.constants.Urls.RESOURCES_BASE_PATH,tb=NineNineFreelas.prepare(NineNineFreelas.utils.MessageUtils),ub=NineNineFreelas.prepare(NineNineFreelas.utils.ValidationUtils),vb=NineNineFreelas.prepare(NineNineFreelas.utils.StringUtils),wb=NineNineFreelas.prepare(NineNineFreelas.utils.UrlUtils),xb=NineNineFreelas.prepare(NineNineFreelas.modules.Error),yb=NineNineFreelas.prepare(NineNineFreelas.modules.Events);Y()}var b={};return b.prepare=function(){return b.prepare=function(){return b},a(),b},b}();
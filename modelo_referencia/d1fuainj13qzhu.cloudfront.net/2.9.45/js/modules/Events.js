NineNineFreelas.modules.Events=function(){function a(){function a(){return new EventEmitter}function c(a,b,c){var d=c&&c.socket;o.on(a,b),d&&p.listen(a)}function d(a,b,c){var d=c&&c.socket;o.removeListener(a,b),d&&p.removeListener(a)}function e(a,b){o.emit(a,b)}function f(a){s[a]||(s[a]=!0,z.emit("join",a))}function g(a){s[a]&&(delete s[a],z.leave(a))}function h(a){var b=!r[a];r[a]||(r[a]=0),r[a]++,b&&z.on(a,function(b){var c=w.parseJSON(b);e(a,c)})}function i(a){r[a]&&(r[a]--,r[a]||z.removeAllListeners(a))}function j(a,b){z?a():b&&b()}function k(){var a,b,c=q.length,d=!1,e=t;if(!y&&(y=!0,x=!1,"undefined"!=typeof io&&(b="idPessoa="+u+"&userSessionId="+v,e||(e=location.origin),z=io.connect(e,{query:b,transports:["websocket","polling"]}),z&&(d=!0,z.on("disconnect",function(){d=!1}),z.on("connect",function(){var a,b,c=s,e=r;if(!d){d=!0,s={},r={};for(a in c)f(a);for(b in e)h(b)}}))),c))for(a=0;c>a;a++)setTimeout(q[a],0)}function l(){var a=1e3,b=1e4;"undefined"!=typeof io?k():setTimeout(k,a),setTimeout(k,b)}function m(a,b,c,d,e){y?z||d?(a[b]=c,c.apply(null,e)):a[b]=function(){}:(q.push(function(){(z||d)&&c.apply(null,e)}),x||(x=!0,l()))}function n(){b.createEmitter=a,b.on=c,b.removeListener=d,b.emit=e,b.socket=p,b.executeAfterLoadSocket=function(){m(b,"executeAfterLoadSocket",j,!0,arguments)},p.join=function(){m(p,"join",f,!1,arguments)},p.leave=function(){m(p,"leave",g,!1,arguments)},p.listen=function(){m(p,"listen",h,!1,arguments)},p.removeListener=function(){m(p,"removeListener",i,!1,arguments)}}var o=a(),p={},q=[],r={},s={},t=NineNineFreelas.constants.Urls.CONTEXT_NOTIFICATION_CLIENT,u=NineNineFreelas.constants.Usuario.ID_PESSOA,v=NineNineFreelas.infoUsuario.USER_SESSION_ID,w=NineNineFreelas.prepare(NineNineFreelas.utils.ServiceUtils),x=(NineNineFreelas.constants.Urls.RESOURCES_BASE_PATH,!1),y=!1,z=null;n()}var b={};return b.prepare=function(){return b.prepare=function(){return b},a(),b},b}();